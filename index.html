<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rubik's Cube Solver | Learn & Solve</title>
    <meta name="description" content="Interactive 3D Rubik's Cube solver. Learn step-by-step or input your cube state for automatic solution.">
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon"><i data-lucide="box" class="icon"></i></span>
                <h1>Rubik's Cube Solver</h1>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab active" data-tab="play">Play</button>
                <button class="nav-tab" data-tab="tutorial">Learn</button>
                <button class="nav-tab" data-tab="solver">Solve</button>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- 3D Cube Viewport -->
            <section class="cube-viewport">
                <div id="cube-container"></div>
                <div class="viewport-info">
                    <span class="info-badge">‚óé Drag to rotate view</span>
                </div>
            </section>

            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Play Mode Controls -->
                <div class="panel play-panel active" id="play-panel">
                    <h2 class="panel-title">Controls</h2>
                    
                    <div class="control-section">
                        <h3>Face Moves</h3>
                        <div class="move-buttons">
                            <div class="move-row">
                                <button class="move-btn" data-move="U">U</button>
                                <button class="move-btn prime" data-move="U'">U'</button>
                                <button class="move-btn" data-move="D">D</button>
                                <button class="move-btn prime" data-move="D'">D'</button>
                            </div>
                            <div class="move-row">
                                <button class="move-btn" data-move="R">R</button>
                                <button class="move-btn prime" data-move="R'">R'</button>
                                <button class="move-btn" data-move="L">L</button>
                                <button class="move-btn prime" data-move="L'">L'</button>
                            </div>
                            <div class="move-row">
                                <button class="move-btn" data-move="F">F</button>
                                <button class="move-btn prime" data-move="F'">F'</button>
                                <button class="move-btn" data-move="B">B</button>
                                <button class="move-btn prime" data-move="B'">B'</button>
                            </div>
                        </div>
                    </div>

                    <div class="control-section">
                        <h3>Actions</h3>
                        <div class="action-buttons">
                            <button class="action-btn scramble" id="scramble-btn">
                                <i data-lucide="shuffle" class="btn-icon"></i> Scramble
                            </button>
                            <button class="action-btn" id="reset-btn">
                                <i data-lucide="rotate-ccw" class="btn-icon"></i> Reset
                            </button>
                        </div>
                    </div>

                    <div class="control-section">
                        <h3>Move History</h3>
                        <div class="move-history" id="move-history">
                            <span class="placeholder">No moves yet</span>
                        </div>
                        <div class="history-actions">
                            <button class="action-btn history-btn" id="undo-btn" title="Undo (Ctrl+Z)">
                                <span class="btn-icon">‚Ü©</span> Undo
                            </button>
                            <button class="action-btn history-btn" id="redo-btn" title="Redo (Ctrl+Y)">
                                <span class="btn-icon">‚Ü™</span> Redo
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tutorial Panel -->
                <div class="panel tutorial-panel" id="tutorial-panel">
                    <h2 class="panel-title">Learn to Solve</h2>
                    
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="tutorial-progress"></div>
                        </div>
                        <span class="progress-text" id="progress-text">Step 1 of 7</span>
                    </div>

                    <div class="tutorial-steps" id="tutorial-steps">
                        <div class="tutorial-step active" data-step="1">
                            <div class="step-header">
                                <span class="step-number">1</span>
                                <h3>White Cross</h3>
                            </div>
                            <p class="step-description">Form a cross on the white face, matching edges with center colors.</p>
                            <button class="demo-btn" data-step="1">‚ñ∂ Watch Demo</button>
                        </div>
                        <div class="tutorial-step" data-step="2">
                            <div class="step-header">
                                <span class="step-number">2</span>
                                <h3>White Corners</h3>
                            </div>
                            <p class="step-description">Insert the four white corner pieces correctly.</p>
                            <button class="demo-btn" data-step="2">‚ñ∂ Watch Demo</button>
                        </div>
                        <div class="tutorial-step" data-step="3">
                            <div class="step-header">
                                <span class="step-number">3</span>
                                <h3>Second Layer</h3>
                            </div>
                            <p class="step-description">Solve sides using left/right insert algorithms.</p>
                            <button class="demo-btn" data-step="3">‚ñ∂ Watch Demo</button>
                        </div>
                        <div class="tutorial-step" data-step="4">
                            <div class="step-header">
                                <span class="step-number">4</span>
                                <h3>Yellow Cross</h3>
                            </div>
                            <p class="step-description">Create a yellow cross on top.</p>
                            <button class="demo-btn" data-step="4">‚ñ∂ Watch Demo</button>
                        </div>
                        <div class="tutorial-step" data-step="5">
                            <div class="step-header">
                                <span class="step-number">5</span>
                                <h3>Yellow Edges</h3>
                            </div>
                            <p class="step-description">Position yellow edges correctly.</p>
                            <button class="demo-btn" data-step="5">‚ñ∂ Watch Demo</button>
                        </div>
                        <div class="tutorial-step" data-step="6">
                            <div class="step-header">
                                <span class="step-number">6</span>
                                <h3>Position Corners</h3>
                            </div>
                            <p class="step-description">Move yellow corners to correct spots.</p>
                            <button class="demo-btn" data-step="6">‚ñ∂ Watch Demo</button>
                        </div>
                        <div class="tutorial-step" data-step="7">
                            <div class="step-header">
                                <span class="step-number">7</span>
                                <h3>Orient Corners</h3>
                            </div>
                            <p class="step-description">Twist corners to solve the cube!</p>
                            <button class="demo-btn" data-step="7">‚ñ∂ Watch Demo</button>
                        </div>
                    </div>

                    <div class="tutorial-nav">
                        <button class="nav-btn" id="prev-step" disabled>‚Üê Previous</button>
                        <button class="nav-btn" id="next-step">Next ‚Üí</button>
                    </div>
                </div>

                <!-- Solver Panel -->
                <div class="panel solver-panel" id="solver-panel">
                    <h2 class="panel-title">
                        <span class="title-icon">üß©</span>
                        Solve Your Cube
                    </h2>
                    
                    <div class="solver-instructions">
                        <p class="instructions-text">
                            <strong>1.</strong> Select a color below<br>
                            <strong>2.</strong> Click stickers on the 3D cube to paint<br>
                            <strong>3.</strong> Match your real cube, then solve!
                        </p>
                    </div>
                    
                    <div class="control-section">
                        <h3>Select Color</h3>
                        <div class="color-picker-enhanced">
                            <button class="color-swatch-enhanced active" data-color="W" style="--swatch-color: #ffffff" title="White">
                                <span class="swatch-count">0</span>
                            </button>
                            <button class="color-swatch-enhanced" data-color="Y" style="--swatch-color: #ffdd00" title="Yellow">
                                <span class="swatch-count">0</span>
                            </button>
                            <button class="color-swatch-enhanced" data-color="R" style="--swatch-color: #dc143c" title="Red">
                                <span class="swatch-count">0</span>
                            </button>
                            <button class="color-swatch-enhanced" data-color="O" style="--swatch-color: #ff4500" title="Orange">
                                <span class="swatch-count">0</span>
                            </button>
                            <button class="color-swatch-enhanced" data-color="B" style="--swatch-color: #0051ba" title="Blue">
                                <span class="swatch-count">0</span>
                            </button>
                            <button class="color-swatch-enhanced" data-color="G" style="--swatch-color: #009b48" title="Green">
                                <span class="swatch-count">0</span>
                            </button>
                        </div>
                    </div>

                    <div class="control-section status-section">
                        <div class="solver-status-container">
                            <div class="status-indicator" id="status-indicator"></div>
                            <p class="solver-status" id="solver-status">Click stickers on the cube to paint</p>
                        </div>
                        <div class="paint-progress">
                            <div class="paint-progress-bar" id="paint-progress-bar"></div>
                        </div>
                    </div>

                    <div class="control-section solver-actions">
                        <div class="action-buttons-row">
                            <button class="action-btn undo-paint" id="undo-paint-btn" title="Undo last paint">
                                <span class="btn-icon">‚Ü©</span>
                            </button>
                            <button class="action-btn solve primary-solve" id="solve-btn">
                                <span class="btn-icon">‚ú®</span> Solve My Cube
                            </button>
                        </div>
                        <button class="action-btn reset-solver" id="reset-input-btn">
                            <span class="btn-icon">‚Ü∫</span> Reset & Start Over
                        </button>
                    </div>

                    <div class="solution-display" id="solution-display">
                        <div class="solution-header">
                            <h3>Solution</h3>
                            <span class="move-count" id="move-count"></span>
                        </div>
                        
                        <!-- Phase-grouped solution display -->
                        <div class="solution-phases-container" id="solution-phases-container" style="display: none;">
                            <!-- Populated dynamically -->
                        </div>
                        
                        <div class="solution-moves" id="solution-moves">
                            <span class="placeholder">Paint your cube state above, then click Solve</span>
                        </div>
                        
                        <div class="solution-controls" id="solution-controls" style="display: none;">
                            <button class="action-btn play-btn" id="play-solution">
                                <span class="btn-icon">‚ñ∂</span> Play All
                            </button>
                            <button class="action-btn step-btn" id="step-solution">
                                <span class="btn-icon">‚è≠</span> Step
                            </button>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Mobile Bottom Navigation -->
        <nav class="mobile-nav">
            <button class="mobile-nav-btn active" data-tab="play">
                <i data-lucide="gamepad-2" class="mobile-nav-icon"></i>
                <span class="mobile-nav-label">Play</span>
            </button>
            <button class="mobile-nav-btn" data-tab="tutorial">
                <i data-lucide="book-open" class="mobile-nav-icon"></i>
                <span class="mobile-nav-label">Learn</span>
            </button>
            <button class="mobile-nav-btn" data-tab="solver">
                <i data-lucide="wand-2" class="mobile-nav-icon"></i>
                <span class="mobile-nav-label">Solve</span>
            </button>
        </nav>

        <!-- Keyboard Shortcuts Modal -->
        <div class="modal" id="shortcuts-modal">
            <div class="modal-content">
                <h2>Keyboard Shortcuts</h2>
                <div class="shortcuts-list">
                    <div class="shortcut"><kbd>R</kbd> <span>Right face</span></div>
                    <div class="shortcut"><kbd>L</kbd> <span>Left face</span></div>
                    <div class="shortcut"><kbd>U</kbd> <span>Up face</span></div>
                    <div class="shortcut"><kbd>D</kbd> <span>Down face</span></div>
                    <div class="shortcut"><kbd>F</kbd> <span>Front face</span></div>
                    <div class="shortcut"><kbd>B</kbd> <span>Back face</span></div>
                    <div class="shortcut"><kbd>Shift+Key</kbd> <span>Counter-clockwise</span></div>
                    <div class="shortcut"><kbd>Space</kbd> <span>Scramble</span></div>
                </div>
                <button class="close-modal">Got it</button>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toast-container"></div>

        <!-- Help Button -->
        <button class="help-btn" id="help-btn" title="Keyboard Shortcuts">?</button>
    </div>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <!-- Initialize Lucide Icons -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>
    
    <!-- App Scripts -->
    <script type="module" src="js/main.js"></script>
</body>
</html>

